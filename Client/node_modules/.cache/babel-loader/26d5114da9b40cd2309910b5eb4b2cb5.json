{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\suvic_0eixjpz\\\\Desktop\\\\Anime\\\\Anime-Ecommerce-Store\\\\Anime-ECommerce\\\\src\\\\Components\\\\Pages\\\\Payment\\\\Pay.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport \"./Pay.css\";\nimport StripeCheckout from 'react-stripe-checkout';\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst key = \"pk_test_51LBJutJ4YPDEljAM5mXTpMJZHtrBCxAl9v8xE8Kaqq0wOwM1tVxwU67pBqEohpG2vPYMpH4RFtOczCqCHfRcuD0j00qeXAj0eY\";\n\nconst Pay = () => {\n  _s();\n\n  const [stripeToken, setStripeToken] = useState(null);\n  const history = useHistory();\n\n  const onToken = token => {\n    setStripeToken(token);\n  };\n\n  useEffect(() => {\n    const makeRequest = async () => {\n      try {\n        const res = await axios.post(\"http://localhost:5000/api/checkout/payment\", {\n          tokenId: stripeToken.id,\n          amount: 2000\n        });\n        console.log(res.data);\n        history.push(\"/success\");\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    if (stripeToken) {\n      makeRequest();\n    }\n  }, [stripeToken, history]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pay-wrapper\",\n    children: stripeToken ? /*#__PURE__*/_jsxDEV(\"span\", {\n      children: \"Processing. Please wait...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 23\n    }, this) : /*#__PURE__*/_jsxDEV(StripeCheckout, {\n      name: \"V & J Anime Store\",\n      image: \"https://cdn3.iconfinder.com/data/icons/brands-applications/512/naruto-512.png\",\n      billingAddress: true,\n      shippingAddress: true,\n      description: \"Your total is $20\",\n      amount: 2000,\n      token: onToken,\n      stripeKey: key,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"pay-button\",\n        children: \"Pay Now\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Pay, \"m/HXWd2E0K1ZyX+WvHhtNaG45WM=\", true);\n\n_c = Pay;\nexport default Pay;\n\nvar _c;\n\n$RefreshReg$(_c, \"Pay\");","map":{"version":3,"names":["React","StripeCheckout","useState","useEffect","axios","key","Pay","stripeToken","setStripeToken","history","useHistory","onToken","token","makeRequest","res","post","tokenId","id","amount","console","log","data","push","err"],"sources":["C:/Users/suvic_0eixjpz/Desktop/Anime/Anime-Ecommerce-Store/Anime-ECommerce/src/Components/Pages/Payment/Pay.jsx"],"sourcesContent":["import React from 'react'\r\nimport \"./Pay.css\";\r\nimport StripeCheckout from 'react-stripe-checkout';\r\nimport { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst key = \"pk_test_51LBJutJ4YPDEljAM5mXTpMJZHtrBCxAl9v8xE8Kaqq0wOwM1tVxwU67pBqEohpG2vPYMpH4RFtOczCqCHfRcuD0j00qeXAj0eY\"\r\n\r\nconst Pay = () => {\r\n  const [stripeToken, setStripeToken] = useState(null);\r\n  const history = useHistory()\r\n  const onToken = (token) =>{\r\n    setStripeToken(token);\r\n  };\r\n\r\n  useEffect(()=>{\r\n    const makeRequest = async () =>{\r\n      try{\r\n        const res = await axios.post(\r\n          \"http://localhost:5000/api/checkout/payment\",\r\n          {tokenId: stripeToken.id, amount: 2000,}\r\n          );\r\n          console.log(res.data);\r\n          history.push(\"/success\")\r\n      }catch(err){\r\n        console.log(err);\r\n      }\r\n    };\r\n    if(stripeToken){\r\n      makeRequest();\r\n    }\r\n  }, [stripeToken, history]);\r\n\r\n  return (\r\n    <div className = \"pay-wrapper\">\r\n      {stripeToken ? (<span>Processing. Please wait...</span>) : (\r\n      <StripeCheckout\r\n      name = \"V & J Anime Store\"\r\n      image = \"https://cdn3.iconfinder.com/data/icons/brands-applications/512/naruto-512.png\"\r\n      billingAddress\r\n      shippingAddress\r\n      description ='Your total is $20'\r\n      amount = {2000}\r\n      token = {onToken}\r\n      stripeKey = {key}\r\n      >\r\n        <button id = \"pay-button\">Pay Now</button>\r\n      </StripeCheckout>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Pay"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,WAAP;AACA,OAAOC,cAAP,MAA2B,uBAA3B;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,GAAG,GAAG,6GAAZ;;AAEA,MAAMC,GAAG,GAAG,MAAM;EAAA;;EAChB,MAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCN,QAAQ,CAAC,IAAD,CAA9C;EACA,MAAMO,OAAO,GAAGC,UAAU,EAA1B;;EACA,MAAMC,OAAO,GAAIC,KAAD,IAAU;IACxBJ,cAAc,CAACI,KAAD,CAAd;EACD,CAFD;;EAIAT,SAAS,CAAC,MAAI;IACZ,MAAMU,WAAW,GAAG,YAAW;MAC7B,IAAG;QACD,MAAMC,GAAG,GAAG,MAAMV,KAAK,CAACW,IAAN,CAChB,4CADgB,EAEhB;UAACC,OAAO,EAAET,WAAW,CAACU,EAAtB;UAA0BC,MAAM,EAAE;QAAlC,CAFgB,CAAlB;QAIEC,OAAO,CAACC,GAAR,CAAYN,GAAG,CAACO,IAAhB;QACAZ,OAAO,CAACa,IAAR,CAAa,UAAb;MACH,CAPD,CAOC,OAAMC,GAAN,EAAU;QACTJ,OAAO,CAACC,GAAR,CAAYG,GAAZ;MACD;IACF,CAXD;;IAYA,IAAGhB,WAAH,EAAe;MACbM,WAAW;IACZ;EACF,CAhBQ,EAgBN,CAACN,WAAD,EAAcE,OAAd,CAhBM,CAAT;EAkBA,oBACE;IAAK,SAAS,EAAG,aAAjB;IAAA,UACGF,WAAW,gBAAI;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAJ,gBACZ,QAAC,cAAD;MACA,IAAI,EAAG,mBADP;MAEA,KAAK,EAAG,+EAFR;MAGA,cAAc,MAHd;MAIA,eAAe,MAJf;MAKA,WAAW,EAAE,mBALb;MAMA,MAAM,EAAI,IANV;MAOA,KAAK,EAAII,OAPT;MAQA,SAAS,EAAIN,GARb;MAAA,uBAUE;QAAQ,EAAE,EAAG,YAAb;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAVF;MAAA;MAAA;MAAA;IAAA;EAFF;IAAA;IAAA;IAAA;EAAA,QADF;AAkBD,CA3CD;;GAAMC,G;;KAAAA,G;AA6CN,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}